predicates:
  procedure_start:
    column: event_type
    value: PROCEDURE_START
    system: boolean
  procedure_end:
    column: event_type
    value: PROCEDURE_END
    system: boolean
  ventilation:
    column: procedure
    value: Invasive Ventilation
    system: boolean
  ventilation_start:
    type: ALL
    predicates: [procedure_start, ventilation]
    system: boolean
  ventilation_end:
    type: ALL
    predicates: [procedure_end, ventilation]
    system: boolean
  any:
    type: special

windows:
  trigger:
    start: ventilation_start
    duration:
    offset:
    end: ventilation_start
    excludes:
    includes: 
      - predicate: ventilation_start
        min: 1
        max: 1
    st_inclusive: False
    end_inclusive: True
  target:
    start: trigger.end
    duration: 
    offset:
    end: ventilation_end
    excludes:
    includes: 
      - predicate: ventilation_end
        min: 1
        max: 1
    st_inclusive: False
    end_inclusive: True
    label: 
  input:
    start:
    duration: -30 days
    offset:
    end: trigger.start
    excludes:  
    includes: 
      - predicate: any
        min: 100
    st_inclusive: False
    end_inclusive: True