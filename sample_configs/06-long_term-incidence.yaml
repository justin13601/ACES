predicates:
  admission:
    code: event_type//ADMISSION
  discharge:
    code: event_type//DISCHARGE
  diagnosis_1:
    code: dx//ICD9CM/41071
  diagnosis_2:
    code: dx//ICD10CM/I214
  myocardial_infarction:
    expr: or(diagnosis_1, diagnosis_2)

trigger_event: discharge

windows:
  input:
    start: admission
    end: trigger
    start_inclusive: False
    end_inclusive: True
  gap:
    start: trigger
    end: start + 365 days
    start_inclusive: False
    end_inclusive: True
    has:
      myocardial_infarction: (None, 0)
  target:
    start: gap.end
    end: start + 1095 days
    start_inclusive: False
    end_inclusive: True
    label: myocardial_infarction
