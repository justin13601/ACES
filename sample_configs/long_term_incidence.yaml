predicates:
  admission:
    column: event_type
    value: ADMISSION
    system: boolean
  discharge:
    column: event_type
    value: DISCHARGE
    system: boolean
  diagnosis_1:
    column: diagnosis
    value: ICD9CM/41071
    system: boolean
  diagnosis_2:
    column: diagnosis
    value: ICD10CM/I214
    system: boolean
  diagnosis_3:
    column: diagnosis
    value: ICD10CM/I21A1
    system: boolean
  diagnosis_4:
    column: diagnosis
    value: ICD9CM/41041
    system: boolean
  diagnosis_5:
    column: diagnosis
    value: ICD9CM/41011
    system: boolean
  diagnosis_6:
    column: diagnosis
    value: ICD9CM/41091
    system: boolean
  diagnosis_7:
    column: diagnosis
    value: ICD10CM/I2119
    system: boolean
  diagnosis_8:
    column: diagnosis
    value: ICD9CM/41072
    system: boolean
  diagnosis_9:
    column: diagnosis
    value: ICD10CM/I2109
    system: boolean
  diagnosis_10:
    column: diagnosis
    value: ICD10CM/I213
    system: boolean
  myocardial_infarction:
    type: ANY
    predicates:
      [
        diagnosis_1,
        diagnosis_2,
        diagnosis_3,
        diagnosis_4,
        diagnosis_5,
        diagnosis_6,
        diagnosis_7,
        diagnosis_8,
        diagnosis_9,
        diagnosis_10,
      ]
    system: boolean
  any:
    type: special

windows:
  trigger:
    start: discharge
    duration:
    offset:
    end: discharge
    excludes:
    includes:
    st_inclusive: False
    end_inclusive: True
  gap:
    start: trigger.end
    duration: 365 days
    offset:
    end:
    excludes:
      - predicate: myocardial_infarction
    includes:
    st_inclusive: False
    end_inclusive: True
    label:
  target:
    start: gap.end
    duration: 1095 days
    offset:
    end:
    excludes:
    includes:
    st_inclusive: False
    end_inclusive: True
    label: myocardial_infarction
  input:
    start: admission
    duration:
    offset:
    end: trigger.start
    excludes:
    includes:
      - predicate: discharge
        min: 1
        max: 1
    st_inclusive: False
    end_inclusive: True
